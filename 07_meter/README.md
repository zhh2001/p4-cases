# 计量器

简单地演示如何在 P4 中将双速率三色计量器与 BMv2 结合使用。

对于每个传入数据包，都会应用 `m_read` 表，并根据数据包的源 MAC 地址执行相应的计量器。根据观察到的发送方流量速率和计量器的配置，执行计量器将产生以下三个值之一：0（绿色）、1（黄色）或 2（红色）。该值将被复制到元数据字段 `meta.meter_tag`。请注意，如果没有与发送方 MAC 地址关联的计量器，则该表将为空操作。该表还会将所有已知源 MAC 地址的数据包重定向到交换机的 2 号端口。

之后，数据包将通过第二个表 `m_filter`，该表可以执行空操作，也可以根据数据包被计量器标记的方式丢弃。
